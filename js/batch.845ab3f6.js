"use strict";(globalThis["webpackChunkcoreclear_portal"]=globalThis["webpackChunkcoreclear_portal"]||[]).push([[251],{8170:(t,e,a)=>{a.d(e,{Z:()=>C});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tooltip",{attrs:{color:t.color,bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({attrs:{color:t.color}},"v-icon",i,!1),n),[t._v(t._s(t.icon))])]}}])},[a("span",[t._v(t._s(t.message))])])},i=[];const s={name:"BoolStatus",props:{status:{type:Boolean,required:!0,default:!1},statusMessage:{type:String,required:!1,default:"Approved"}},computed:{icon(){return this.status?"mdi-checkbox-marked-circle":"mdi-close"},color(){return this.status?"success":"error"},message(){return this.statusMessage.length>0?this.statusMessage:this.status?"Approved":"Unknown Error"}}},o=s;var r=a(1001),l=a(3453),c=a.n(l),d=a(6428),h=a(5795),u=a(6952),v=a(4561),p=a(5907),m=a(5936),g=a(2936),f=a(4589),_=a(1824),b=a(3325);const y=(0,b.Z)(u.Z,v.Z,p.Z,m.Z,g.Z).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,a=!this.bottom&&!this.left&&!this.top&&!this.right,n=!1!==this.attach?t.offsetLeft:t.left;let i=0;return this.top||this.bottom||a?i=n+t.width/2-e.width/2:(this.left||this.right)&&(i=n+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(i-=parseInt(this.nudgeLeft)),this.nudgeRight&&(i+=parseInt(this.nudgeRight)),`${this.calcXOverflow(i,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,a=!1!==this.attach?t.offsetTop:t.top;let n=0;return this.top||this.bottom?n=a+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(n=a+t.height/2-e.height/2),this.nudgeTop&&(n-=parseInt(this.nudgeTop)),this.nudgeBottom&&(n+=parseInt(this.nudgeBottom)),!1===this.attach&&(n+=this.pageYOffset),`${this.calcYOverflow(n)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:(0,f.kb)(this.maxWidth),minWidth:(0,f.kb)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick((()=>{this.value&&this.callActivate()}))},mounted(){"v-slot"===(0,f.sp)(this,"activator",!0)&&(0,_.N6)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=h.Z.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")}),t.keydown=t=>{t.keyCode===f.Do.esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((()=>[this.genTransition()])),this.genActivator()])}});var x=(0,r.Z)(o,n,i,!1,null,null,null);const C=x.exports;c()(x,{VIcon:d.Z,VTooltip:y})},1531:(t,e,a)=>{a.r(e),a.d(e,{default:()=>L});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"justify-center"},[a("v-col",{attrs:{cols:"12",md:"10"}},[a("v-alert",{attrs:{type:t.alertType,border:"left","close-text":"Close Alert",dismissible:"",transition:"scale-transition"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v(" "+t._s(t.alertMessage)+" ")]),a("v-dialog",{attrs:{width:"500"},model:{value:t.dialogDetail,callback:function(e){t.dialogDetail=e},expression:"dialogDetail"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v(" Totals")]),a("v-card-text",{staticClass:"pb-1"},[t._v(" Captured Amount: "+t._s(t._f("currency")(t.batchDetail.capturedAmount))+" ")]),a("v-card-text",{staticClass:"pb-1"},[t._v(" Terminal Transaction Count: "+t._s(t.batchDetail.transactionCount)+" ")]),0!=t.batchDetail.transactionstotal_non_terminal_transactions?a("v-card-text",{staticClass:"pb-1"},[t._v(" Non Terminal Transaction Count: "+t._s(t.batchDetail.transactionstotal_non_terminal_transactions)+" ")]):t._e(),a("v-card-text",{staticClass:"pb-3"},[t._v(" Captured Deposit Amount: "+t._s(t._f("currency")(t.batchDetail.expectedDeposit))+" ")]),t.batchDetailVolumeByTerminalLength>0?a("v-card-text",{staticClass:"text-h5 pb-2"},[t._v(" Per Register ")]):t._e(),t._l(t.batchDetailVolumeByTerminalLength,(function(e){return a("v-card-text",{key:e,staticClass:"pb-1"},[t._v(" Terminal Name: "+t._s(t.batchDetail.volumeByTerminal[e-1].terminalName)+" "),a("br"),t._v(" Captured Amount: "+t._s(t.batchDetail.volumeByTerminal[e-1].capturedAmount)+" "),a("br"),t._v(" Transaction Count: "+t._s(t.batchDetail.volumeByTerminal[e-1].transactionCount)+" "),a("br"),a("br")])})),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialogDetail=!1}}},[t._v(" OK ")])],1)],2)],1),a("v-data-table",{staticClass:"elevation-4 rounded-lg",attrs:{"footer-props":t.tableFooterProps,headers:t.headers,items:t.batches,loading:t.loading,search:t.search,"item-key":"batchId","loading-text":"Loading... Please wait","show-expand":"","single-expand":"","sort-by":"openDate","sort-desc":""},on:{"item-expanded":t.getTransactionsForBatch},scopedSlots:t._u([{key:"item.capturedAmount",fn:function(e){var n=e.item;return[a("div",{class:n.capturedAmount<0?"red--text font-weight-bold":""},[t._v(" "+t._s(t._f("currency")(n.capturedAmount))+" ")])]}},{key:"item.open",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.open?"Open":"Closed")+" ")]}},{key:"item.openDate",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.formatDateTime(a.openDate))+" ")]}},{key:"item.closeDate",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.formatDateTime(a.closeDate))+" ")]}},{key:"item.details",fn:function(e){var n=e.item;return[a("v-btn",{staticClass:"white--text",attrs:{color:"teal"},on:{click:function(e){return t.batchDetails(n.batchId)}}},[t._v(" Details ")])]}},{key:"item.excelExport",fn:function(e){var n=e.item;return[a("v-btn",{staticClass:"white--text",attrs:{href:t.getInternalCoreClearController+"/excel_export_batch_history/"+n.batchId,color:"green"}},[t._v(" Excel Export ")])]}},{key:"expanded-item",fn:function(e){var n=e.headers,i=e.item;return[a("td",{attrs:{colspan:n.length}},[a("v-data-table",{staticClass:"elevation-0 ma-2",attrs:{"footer-props":t.tableFooterProps,headers:t.transactionHeaders,items:i.transactions,loading:t.transactionLoading,dense:"","item-key":"transactionId","loading-text":"Loading... Please wait","sort-by":"timestamp","sort-desc":""},scopedSlots:t._u([{key:"item.timestamp",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.formatDateTime(a.timestamp))+" ")]}},{key:"item.sale_id",fn:function(e){var n=e.item;return[null!=n.receipt_link?[a("v-btn",{staticClass:"white--text",attrs:{color:"primary",href:n.receipt_link,target:"_blank"}},[t._v(" "+t._s(n.sale_id)+" ")])]:null!=n.sale_id?[t._v(" "+t._s(n.sale_id)+" ")]:[t._v(" N/A ")]]}},{key:"item.approved",fn:function(t){var e=t.item;return[a("bool-status",{attrs:{status:e.approved,"status-message":e.responseDescription}})]}},{key:"item.authorizedAmount",fn:function(e){var n=e.item;return[a("div",{class:"void"===n.transactionType||"refund"===n.transactionType?"red--text font-weight-bold":""},[t._v(" "+t._s(t._f("currency")(n.authorizedAmount,n.transactionType))+" ")])]}},{key:"item.transactionType",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("titleCase")(a.transactionType))+" ")]}},{key:"item.entryMethod",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("titleCase")(a.entryMethod))+" ")]}},{key:"item.paymentType",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("titleCase")(a.paymentType))+" ")]}}],null,!0)})],1)]}},{key:"top",fn:function(){return[a("v-toolbar",{staticClass:"rounded-t-lg",attrs:{color:"green darken-2",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Batches")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"search",clearable:"",dark:"","hide-details":"",label:"Search","single-line":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,"min-width":"auto","offset-y":"",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{"append-icon":"mdi-calendar","hide-details":"",label:"Date Range",readonly:"","single-line":""},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},"v-text-field",i,!1),n))]}}]),model:{value:t.datePickerMenu,callback:function(e){t.datePickerMenu=e},expression:"datePickerMenu"}},[a("v-date-picker",{attrs:{range:""},on:{change:t.initialize},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-alert",{staticClass:"ma-2",attrs:{prominent:"",text:"",type:"info"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"grow"},[t._v(" No records found")]),a("v-col",{staticClass:"shrink"},[a("v-btn",{staticClass:"my-2 white--text",attrs:{color:"green"},on:{click:t.initialize}},[t._v(" Retry ")])],1)],1)],1)]},proxy:!0}],null,!0)},[t._v(" > ")])],1)],1)},i=[],s=a(629),o=a(9669),r=a.n(o),l=a(743),c=a.n(l),d=a(381),h=a.n(d),u=a(8170);const v={name:"BatchList",components:{BoolStatus:u.Z},data(){return{dialogDetail:!1,batchDetail:{},batchDetailVolumeByTerminalLength:0,datePickerMenu:!1,loading:!1,transactionLoading:!1,alert:!1,alertMessage:"",alertType:"success",search:"",filterType:null,tableFooterProps:{showFirstLastPage:!0},headers:[{text:"Batch ID",align:"left",value:"batchId"},{text:"Amount",align:"right",value:"capturedAmount"},{text:"Status",align:"left",value:"open"},{text:"Start Date",align:"left",value:"openDate"},{text:"End Date",align:"left",value:"closeDate"},{text:"Details",align:"left",value:"details",sortable:!1,filterable:!1},{text:"Excel Export",align:"left",value:"excelExport",sortable:!1,filterable:!1}],batches:[],transactionHeaders:[{text:"Date",align:"left",value:"timestamp"},{text:"Sale ID",align:"left",value:"sale_id"},{text:"Transaction ID",align:"left",value:"transactionId"},{text:"Approved",align:"left",value:"approved"},{text:"Card Holder",align:"left",value:"cardHolder"},{text:"Amount",align:"right",value:"authorizedAmount"},{text:"Transaction Type",align:"center",value:"transactionType"},{text:"Entry Method",align:"left",value:"entryMethod"},{text:"Payment Type",align:"left",value:"paymentType"},{text:"Masked Card",align:"left",value:"maskedPan"}],dateRange:[h()().subtract(30,"days").toISOString(),h()().toISOString()]}},computed:{...(0,s.Se)(["getInternalCoreClearController"]),dateRangeText(){return this.dateRange.map((t=>h()(t).format("MM/DD/YYYY"))).join(" through ")}},mounted(){this.initialize()},methods:{openAlert(t,e){this.alertType=t,this.alertMessage=e,this.alert=!0},async initialize(){this.loading=!0,this.datePickerMenu=!1;const t=void 0!==this.dateRange[0]?this.dateRange[0]:"",e=void 0!==this.dateRange[1]?this.dateRange[1]:"";try{let a=await r().get(""+(this.getInternalCoreClearController+"/batches/1"),{withCredentials:!0,crossDomain:!0,params:{start_date:h()(t).format("MM/DD/YYYY"),end_date:h()(e).format("MM/DD/YYYY")}});this.loading=!1,a.data.batches?this.batches=a.data.batches:(console.log("No batches found"),this.batches=[])}catch(a){console.error("Could not get list of batches"),console.error(a),this.openAlert("error",a.toString()),this.loading=!1,this.batches=[]}},async getTransactionsForBatch({item:t,value:e}){if(e){this.transactionLoading=!0;try{let e=await r().get(""+(this.getInternalCoreClearController+"/get_transactions_for_batch/1"),{withCredentials:!0,crossDomain:!0,params:{batch_id:t.batchId}});this.transactionLoading=!1,e.data?t.transactions=e.data:console.log("No transactions found")}catch(a){console.error("Could not get list of transactions"),console.error(a)}}},formatDateTime(t){return t?h()(t).format("MM/DD/YYYY LT"):""},async batchDetails(t){let e=await r().get(""+(this.getInternalCoreClearController+"/batch_details/1"),{withCredentials:!0,crossDomain:!0,params:{batch_id:t}});if(e.data){this.batchDetail=e.data,this.batchDetailVolumeByTerminalLength=e.data.volumeByTerminal.length;var a=0;if(e.data.volumeByTerminal.length)for(var n=0;n<e.data.volumeByTerminal.length;n++){var i=e.data.volumeByTerminal[n];a+=i.transactionCount}else a=e.data.transactionCount;this.batchDetail.transactionstotal_non_terminal_transactions=e.data.transactionCount-a}else console.log("No details found");this.dialogDetail=!0}},filters:{titleCase:t=>{if(!t)return"";t=t.toString().toLowerCase().split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].slice(1);return t.join(" ")},currency:(t,e)=>{if(!t)return"0";let a=c().formatMoney(t.replace("-",""));return t<0||"void"===e||"refund"===e?"-"+a:a}}},p=v;var m=a(1001),g=a(3453),f=a.n(g),_=a(1234),b=a(3150),y=a(2371),x=a(7118),C=a(2102),D=a(6957),T=a(4484),k=a(4497),A=a(1418),w=a(1152),B=a(2877),Z=a(9762),M=a(5978),S=a(6656),I=a(7921),V=(0,m.Z)(p,n,i,!1,null,null,null);const L=V.exports;f()(V,{VAlert:_.Z,VBtn:b.Z,VCard:y.Z,VCardActions:x.h7,VCardText:x.ZB,VCardTitle:x.EB,VCol:C.Z,VDataTable:D.Z,VDatePicker:T.Z,VDialog:k.Z,VDivider:A.Z,VMenu:w.Z,VRow:B.Z,VSpacer:Z.Z,VTextField:M.Z,VToolbar:S.Z,VToolbarTitle:I.qW})},105:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"py-10",attrs:{fluid:""}},[a("router-view")],1)},i=[];const s={name:"BatchScreen"},o=s;var r=a(1001),l=a(3453),c=a.n(l),d=a(9846),h=(0,r.Z)(o,n,i,!1,null,null,null);const u=h.exports;c()(h,{VContainer:d.Z})}}]);
//# sourceMappingURL=batch.845ab3f6.js.map