"use strict";(globalThis["webpackChunkcoreclear_portal"]=globalThis["webpackChunkcoreclear_portal"]||[]).push([[535],{6232:(t,e,r)=>{r.d(e,{Z:()=>i});var a=r(3325),s=r(6210),o=r(6257);const i=(0,a.Z)(s.Z,(0,o.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),r={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?r.shouldValidate=t.$watch("shouldValidate",(a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(r.valid=e(t)))})):r.valid=e(t),r},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const r=this.watchers.find((t=>t._uid===e._uid));r&&(r.valid(),r.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},5701:(t,e,r)=>{r.r(e),r.d(e,{default:()=>T});var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{staticClass:"align-center justify-center"},[a("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[a("v-alert",{attrs:{border:"left","close-text":"Close Alert",type:t.alertType,transition:"scale-transition",prominent:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v(" "+t._s(t.alertMessage)+" ")]),a("v-fade-transition",[a("v-card",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"elevation-12 rounded-lg"},[a("v-toolbar",{attrs:{color:t.getAppColors.primary,dark:""}},[a("v-avatar",{attrs:{size:"50px"}},[a("v-img",{attrs:{alt:"Logo",src:r(9344),contain:""}})],1),a("v-toolbar-title",{attrs:{dark:""}},[t._v(" core"),a("strong",[t._v("CLEAR")]),t._v(" Portal ")])],1),a("v-card-text",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{"prepend-icon":"person",color:t.getAppColors.primary,label:"Username",name:"username",type:"text",autocomplete:"username",rules:t.usernameRules,required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{"prepend-icon":"lock",color:t.getAppColors.primary,"append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",label:"Password",name:"password",type:t.showPassword?"text":"password",autocomplete:"current-password",rules:t.passwordRules,required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-btn",{attrs:{color:t.getAppColors.primary,text:"",rounded:"",large:"",to:"/forgot-password"}},[t._v(" Forgot Password? ")]),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{color:t.getAppColors.primary,disabled:!t.valid,loading:t.loading,rounded:"",large:""},on:{click:t.submit}},[t._v(" Login ")])],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"300"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("v-card",{attrs:{color:t.getAppColors.primary,dark:""}},[a("v-card-text",[t._v(" Logging in... "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)],1)],1)},s=[],o=r(629),i=r(9669),n=r.n(i);const l={name:"LoginScreen",data(){return{loading:!1,valid:!1,showPassword:!1,alert:!1,alertMessage:"",alertType:"success",username:"",password:"",usernameRules:[t=>!!t||"Username is required"],passwordRules:[t=>!!t||"Password is required"]}},computed:{...(0,o.Se)(["getAppColors","getInternalLoginController"]),subdomain(){let t=window.location.host,e=t.split(".");return e[0]}},methods:{openAlert(t,e){this.alertType=t,this.alertMessage=e,this.alert=!0},submit(){this.$refs.form.validate()&&(this.loading=!0,this.alert=!1,this.userLogin())},async userLogin(){let t=new FormData;t.append("username",this.username),t.append("password",this.password);try{let e=await n().post(""+(this.getInternalLoginController+"/auth_only"),t,{withCredentials:!0,crossDomain:!0});this.loading=!1,!0===e.data.success?(console.log("Logged in!"),this.$store.commit("setIsAuthenticated",!0),this.$store.commit("setCurrentLocationId",e.data.currentLocationId),this.$store.commit("setCurrentLocationName",e.data.currentLocationName),this.$store.commit("setAuthenticatedLocations",e.data.authenticatedLocations),this.$router.push("/")):this.openAlert("error",e.data.error_message)}catch(e){console.error("Could not login"),console.error(e),this.$store.commit("setIsAuthenticated",!1),this.openAlert("error",e.toString()),this.loading=!1}}}},d=l;var c=r(1001),u=r(3453),p=r.n(u),h=r(1234),m=r(6370),g=r(3150),v=r(2371),w=r(7118),f=r(2102),b=r(9846),y=r(4497),C=r(3493),_=r(6232),V=r(7047),x=r(7003),k=r(2877),Z=r(9762),A=r(5978),L=r(6656),$=r(7921),B=(0,c.Z)(d,a,s,!1,null,null,null);const T=B.exports;p()(B,{VAlert:h.Z,VAvatar:m.Z,VBtn:g.Z,VCard:v.Z,VCardActions:w.h7,VCardText:w.ZB,VCol:f.Z,VContainer:b.Z,VDialog:y.Z,VFadeTransition:C.Z5,VForm:_.Z,VImg:V.Z,VProgressLinear:x.Z,VRow:k.Z,VSpacer:Z.Z,VTextField:A.Z,VToolbar:L.Z,VToolbarTitle:$.qW})},9344:(t,e,r)=>{t.exports=r.p+"img/logo-only.62b21ebf.png"}}]);
//# sourceMappingURL=login.f1296ec9.js.map