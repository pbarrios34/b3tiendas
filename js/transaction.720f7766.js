"use strict";(globalThis["webpackChunkcoreclear_portal"]=globalThis["webpackChunkcoreclear_portal"]||[]).push([[209],{6251:(t,e,a)=>{a.d(e,{Z:()=>g});var i=a(8230),s=a(6286),n=a(144);const o=n.Z.extend({name:"rippleable",directives:{ripple:s.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}});var r=a(4419),l=a(3325);function c(t){t.preventDefault()}const u=(0,l.Z)(i.Z,o,r.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=i.Z.options.methods.genLabel.call(this);return t?(t.data.on={click:c},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onBlur(){this.isFocused=!1},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const a=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===a&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(){this.isFocused=!0},onKeydown(t){}}});var d=a(5500),h=a(3493),p=a(624),v=a(4589);const g=u.extend({name:"v-switch",directives:{Touch:d.Z},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...i.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(h.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(p.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===v.Do.left&&this.isActive||t.keyCode===v.Do.right&&!this.isActive)&&this.onChange()}}})},8170:(t,e,a)=>{a.d(e,{Z:()=>_});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-tooltip",{attrs:{color:t.color,bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({attrs:{color:t.color}},"v-icon",s,!1),i),[t._v(t._s(t.icon))])]}}])},[a("span",[t._v(t._s(t.message))])])},s=[];const n={name:"BoolStatus",props:{status:{type:Boolean,required:!0,default:!1},statusMessage:{type:String,required:!1,default:"Approved"}},computed:{icon(){return this.status?"mdi-checkbox-marked-circle":"mdi-close"},color(){return this.status?"success":"error"},message(){return this.statusMessage.length>0?this.statusMessage:this.status?"Approved":"Unknown Error"}}},o=n;var r=a(1001),l=a(3453),c=a.n(l),u=a(6428),d=a(5795),h=a(6952),p=a(4561),v=a(5907),g=a(5936),f=a(2936),m=a(4589),y=a(1824),C=a(3325);const D=(0,C.Z)(h.Z,p.Z,v.Z,g.Z,f.Z).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,a=!this.bottom&&!this.left&&!this.top&&!this.right,i=!1!==this.attach?t.offsetLeft:t.left;let s=0;return this.top||this.bottom||a?s=i+t.width/2-e.width/2:(this.left||this.right)&&(s=i+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),`${this.calcXOverflow(s,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,a=!1!==this.attach?t.offsetTop:t.top;let i=0;return this.top||this.bottom?i=a+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(i=a+t.height/2-e.height/2),this.nudgeTop&&(i-=parseInt(this.nudgeTop)),this.nudgeBottom&&(i+=parseInt(this.nudgeBottom)),!1===this.attach&&(i+=this.pageYOffset),`${this.calcYOverflow(i)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:(0,m.kb)(this.maxWidth),minWidth:(0,m.kb)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick((()=>{this.value&&this.callActivate()}))},mounted(){"v-slot"===(0,m.sp)(this,"activator",!0)&&(0,y.N6)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=d.Z.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")}),t.keydown=t=>{t.keyCode===m.Do.esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((()=>[this.genTransition()])),this.genActivator()])}});var k=(0,r.Z)(o,i,s,!1,null,null,null);const _=k.exports;c()(k,{VIcon:u.Z,VTooltip:D})},2787:(t,e,a)=>{a.r(e),a.d(e,{default:()=>B});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{staticClass:"justify-center"},[a("v-col",{attrs:{cols:"12",md:"10"}},[a("v-alert",{attrs:{type:t.alertType,border:"left","close-text":"Close Alert",dismissible:"",transition:"scale-transition"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v(" "+t._s(t.alertMessage)+" ")]),a("v-dialog",{attrs:{width:"550"},model:{value:t.voidRefundDialog,callback:function(e){t.voidRefundDialog=e},expression:"voidRefundDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5 text-capitalize"},[t._v(" "+t._s(t.voidOrRefund)+" Options ")]),a("v-divider"),a("v-card-text",{staticClass:"mt-3"},[t._v(" Please select how you would like to "+t._s(t.voidOrRefund)+" this sale ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"white--text text-capitalize",attrs:{color:"error"},on:{click:t.voidRefundTransaction}},[t._v(" "+t._s(t.voidOrRefund)+" Full Amount ")]),a("v-btn",{staticClass:"white--text text-capitalize",attrs:{color:"error"},on:{click:function(e){t.voidRefundPartialAmountDialog=!0,t.voidRefundDialog=!1,t.amount=""}}},[t._v(" "+t._s(t.voidOrRefund)+" Partial Amount ")]),a("v-btn",{staticClass:"white--text text-capitalize",attrs:{color:"cyan lighten-1"},on:{click:function(e){t.voidRefundDialog=!1}}},[t._v(" Cancel ")])],1)],1)],1),a("v-dialog",{attrs:{width:"550"},model:{value:t.voidRefundPartialAmountDialog,callback:function(e){t.voidRefundPartialAmountDialog=e},expression:"voidRefundPartialAmountDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v(" Please enter "+t._s(t.voidOrRefund)+" amount ")]),a("v-divider"),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Amount",type:"number"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"text-capitalize",attrs:{color:"grey",text:""},on:{click:function(e){t.voidRefundPartialAmountDialog=!1}}},[t._v(" Cancel ")]),a("v-btn",{staticClass:"white--text text-capitalize",attrs:{color:t.getAppColors.primary},on:{click:function(e){return t.voidRefundTransaction(!1)}}},[t._v(" OK ")])],1)],1)],1),a("v-dialog",{attrs:{width:"550"},model:{value:t.captureDialog,callback:function(e){t.captureDialog=e},expression:"captureDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-subtitle-1"},[t._v(" Are you sure you want to capture this transaction? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"text-capitalize",attrs:{color:"grey",text:""},on:{click:function(e){t.captureDialog=!1}}},[t._v(" Cancel ")]),a("v-btn",{staticClass:"white--text text-capitalize",attrs:{color:t.getAppColors.primary},on:{click:function(e){return t.capturePreauth()}}},[t._v(" OK ")])],1)],1)],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"300"},model:{value:t.loadingActions,callback:function(e){t.loadingActions=e},expression:"loadingActions"}},[a("v-card",{attrs:{color:t.getAppColors.primary,dark:""}},[a("v-card-text",[t._v(" Processing... "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),a("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.loadingActions,expression:"!loadingActions"}],staticClass:"elevation-4 rounded-lg mt-2",attrs:{headers:t.headers,items:t.transactions,loading:t.loading,"loading-text":"Loading... Please wait","footer-props":t.tableFooterProps,"sort-by":"timestamp","sort-desc":""},scopedSlots:t._u([{key:"item.timestamp",fn:function(e){var a=e.item;return[t._v(" "+t._s(t.formatDateTime(a.timestamp))+" ")]}},{key:"item.sale_id",fn:function(e){var i=e.item;return[null!=i.receipt_link?[a("v-btn",{staticClass:"white--text",attrs:{color:"primary",href:i.receipt_link,target:"_blank"}},[t._v(" "+t._s(i.sale_id)+" ")])]:null!=i.sale_id?[t._v(" "+t._s(i.sale_id)+" ")]:[t._v(" N/A ")]]}},{key:"item.approved",fn:function(t){var e=t.item;return[a("bool-status",{attrs:{status:e.approved,"status-message":e.responseDescription}})]}},{key:"item.authorizedAmount",fn:function(e){var i=e.item;return[a("div",{class:"void"===i.transactionType||"refund"===i.transactionType||"reverse"===i.transactionType?"red--text font-weight-bold":""},[t._v(" "+t._s(t._f("currency")(i.authorizedAmount,i.transactionType))+" ")])]}},{key:"item.transactionType",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("titleCase")(a.transactionType))+" ")]}},{key:"item.entryMethod",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("titleCase")(a.entryMethod))+" ")]}},{key:"item.paymentType",fn:function(e){var a=e.item;return[t._v(" "+t._s(t._f("titleCase")(a.paymentType))+" ")]}},{key:"item.actions",fn:function(e){var i=e.item;return["charge"==i.transactionType&&i.approved&&t.formatDate(i.timestamp)==t.formatDate(new Date)?a("v-btn",{staticClass:"white--text text-none",attrs:{color:"error"},on:{click:function(e){return t.showVoidRefundDialog("void",i.transactionId)}}},[t._v(" Void ")]):"charge"==i.transactionType&&i.approved&&t.formatDate(i.timestamp)!=t.formatDate(new Date)?a("v-btn",{staticClass:"white--text text-none",attrs:{color:"error"},on:{click:function(e){return t.showVoidRefundDialog("refund",i.transactionId)}}},[t._v(" Refund ")]):"preauth"==i.transactionType&&i.approved?a("v-btn",{staticClass:"white--text text-none",attrs:{color:t.getAppColors.primary},on:{click:function(e){t.captureDialog=!0,t.selectedTransactionId=i.transactionId}}},[t._v(" Capture ")]):t._e()]}},{key:"top",fn:function(){return[a("v-toolbar",{staticClass:"rounded-t-lg",attrs:{color:"green darken-2",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Transactions")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{label:"Search","append-icon":"search","single-line":"","hide-details":"",clearable:"",dark:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.datepickerDateRange=[],t.initialize()},"click:append":function(e){t.datepickerDateRange=[],t.initialize()},"click:clear":function(e){return t.initialize()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-spacer"),a("v-toolbar-title",[t._v(" Total Transactions for "+t._s(t.dateRangeDisplay)+": "+t._s(t._f("currency")(t.getTotal))+" ")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-btn",{staticClass:"mr-2",attrs:{color:"primary",rounded:"",dark:""},on:{click:t.excelExport}},[a("v-icon",[t._v("mdi-download")])],1),a("v-menu",{attrs:{"close-on-content-click":!1,"offset-x":"",left:"","max-width":"400px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",rounded:"",dark:""}},"v-btn",s,!1),i),[a("v-icon",[t._v("mdi-filter")])],1)]}}]),model:{value:t.filterMenu,callback:function(e){t.filterMenu=e},expression:"filterMenu"}},[a("v-card",[a("v-card-title",[t._v(" Filters")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{label:"Transaction Types",color:t.getAppColors.primary,"item-color":"green","append-icon":"mdi-filter",items:t.transactionTypes,multiple:"",chips:"","deletable-chips":""},on:{change:t.saveFilterPreferences},model:{value:t.filterTypes,callback:function(e){t.filterTypes=e},expression:"filterTypes"}})],1),a("v-col",{attrs:{cols:"12"}},[t.useCustomDateRange?a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Choose Date Range",color:t.getAppColors.primary,"append-icon":"mdi-calendar",readonly:""},model:{value:t.dateRangeText,callback:function(e){t.dateRangeText=e},expression:"dateRangeText"}},"v-text-field",s,!1),i))]}}],null,!1,2310006902),model:{value:t.datePickerMenu,callback:function(e){t.datePickerMenu=e},expression:"datePickerMenu"}},[a("v-date-picker",{attrs:{color:t.getAppColors.primary,range:""},on:{change:function(e){t.search="",t.initialize()}},model:{value:t.datepickerDateRange,callback:function(e){t.datepickerDateRange=e},expression:"\n                                                    datepickerDateRange\n                                                "}})],1):a("v-select",{attrs:{color:t.getAppColors.primary,items:t.getBlockchypDateRangeChoices,"item-color":"green","single-line":"","hide-details":"","return-object":""},on:{change:t.initialize},model:{value:t.quickDateRange,callback:function(e){t.quickDateRange=e},expression:"quickDateRange"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-switch",{attrs:{color:"green",label:"Custom Date Range"},model:{value:t.useCustomDateRange,callback:function(e){t.useCustomDateRange=e},expression:"useCustomDateRange"}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-switch",{attrs:{color:"orange",label:"Show Declines"},model:{value:t.showDeclines,callback:function(e){t.showDeclines=e},expression:"showDeclines"}})],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[a("v-alert",{staticClass:"ma-2",attrs:{prominent:"",text:"",type:"info"}},[a("v-row",{attrs:{align:"center"}},[a("v-col",{staticClass:"grow"},[t._v(" No records found")]),a("v-col",{staticClass:"shrink"},[a("v-btn",{staticClass:"my-2 white--text",attrs:{color:"green"},on:{click:t.initialize}},[t._v(" Retry ")])],1)],1)],1)]},proxy:!0}],null,!0)})],1)],1)},s=[],n=a(629),o=a(9669),r=a.n(o),l=a(743),c=a.n(l),u=a(381),d=a.n(u),h=a(8170);const p={name:"TransactionList",components:{BoolStatus:h.Z},data(){return{datePickerMenu:!1,loading:!1,alert:!1,alertMessage:"",alertType:"success",search:"",filterMenu:!1,filterTypes:["Charge","Refund","Reverse","Capture"],transactionTypes:["Charge","Refund","Reverse","Void","Preauth","Capture","Enroll"],tableFooterProps:{showFirstLastPage:!0},headers:[{text:"Date",align:"left",value:"timestamp"},{text:"Sale ID",align:"center",value:"sale_id"},{text:"Transaction ID",align:"left",value:"transactionId"},{text:"Approved",align:"center",value:"approved",filter:(t,e,a)=>!!this.showDeclines||a.approved},{text:"Card Holder",align:"left",value:"cardHolder"},{text:"Amount",align:"right",value:"authorizedAmount"},{text:"Transaction Type",align:"center",value:"transactionType",filter:(t,e,a)=>{if(!this.filterTypes.length)return!0;if(!a.transactionType)return!1;const i=this.filterTypes.map((t=>t.toUpperCase()));return i.includes(a.transactionType.toUpperCase())}},{text:"Entry Method",align:"left",value:"entryMethod"},{text:"Payment Type",align:"left",value:"paymentType"},{text:"Masked Card",align:"left",value:"maskedPan"},{text:"Actions",align:"left",value:"actions",sortable:!1,filterable:!1}],transactions:[],useCustomDateRange:!1,datepickerDateRange:[],quickDateRange:{text:"Yesterday",value:"yesterday",useForBlockchyp:!0,days:null},voidRefundDialog:!1,captureDialog:!1,voidOrRefund:"void",voidRefundPartialAmountDialog:!1,amount:"",selectedTransactionId:"",loadingActions:!1,showDeclines:!1,axiosSource:null}},watch:{useCustomDateRange:function(t){t||(this.datepickerDateRange=[],this.initialize())}},computed:{...(0,n.Se)(["getAppColors","getInternalCoreClearController","getInternalEmployeePreferencesController","getBlockchypDateRangeChoices"]),dateRangeText(){return this.datepickerDateRange.map((t=>d()(t).format("MM/DD/YYYY"))).join(" through ")},getTotal(){const t=this.filterTypes.map((t=>t.toUpperCase()));let e=0;return this.transactions.forEach((a=>{this.filterTypes.length&&!t.includes(a.transactionType.toUpperCase())||!this.showDeclines&&!a.approved||("refund"===a.transactionType||"void"===a.transactionType?e-=a.approved?Number(a.authorizedAmount.replace(/,/g,"")):0:e+=a.approved?Number(a.authorizedAmount.replace(/,/g,"")):0)})),c().formatMoney(e)},dateRange(){let t=null,e=null,a=null,i=null;if(this.quickDateRange!=={}){switch(this.quickDateRange.value){case"today":t=0,e=0;break;case"yesterday":t=1,e=1;break;default:t=this.quickDateRange.days,e=0}a=d()().subtract(t,"days"),i=d()().subtract(e,"days")}let s=void 0!==this.datepickerDateRange[0]?this.datepickerDateRange[0]:null!==a?a:"",n=void 0!==this.datepickerDateRange[1]?this.datepickerDateRange[1]:null!==i?i:"";return""!==s&&(s=d()(s).set({hour:0,minute:0,second:0,millisecond:0}).toISOString()),""!==n&&(n=d()(n).set({hour:23,minute:59,second:59,millisecond:999}).toISOString()),{startDate:s,endDate:n}},dateRangeDisplay(){return this.dateRangeText?this.dateRangeText:this.quickDateRange.text}},mounted(){this.getFilterPreferences(),this.initialize()},methods:{openAlert(t,e){this.alertType=t,this.alertMessage=e,this.alert=!0},async initialize(){this.loading=!0,this.datePickerMenu=!1;try{this.axiosSource&&this.axiosSource.cancel(),this.axiosSource=r().CancelToken.source();let t=await r().get(""+(this.getInternalCoreClearController+"/get_transactions"),{withCredentials:!0,crossDomain:!0,params:{start_date:this.dateRange.startDate,end_date:this.dateRange.endDate,search:this.search},cancelToken:this.axiosSource.token});this.loading=!1,this.axiosSource=null,t.data.transactions?this.transactions=t.data.transactions:(console.log("No transactions found"),this.transactions=[])}catch(t){console.error("Could not get list of transactions"),console.error(t),this.openAlert("error",t.toString()),this.loading=!1,this.axiosSource=null,this.transactions=[]}},formatDateTime(t){return t?d()(t).format("MM/DD/YYYY LT"):""},formatDate(t){return t?d()(t).format("MM/DD/YYYY"):""},showVoidRefundDialog(t,e){this.voidOrRefund=t,this.voidRefundDialog=!0,this.selectedTransactionId=e},async voidRefundTransaction(t=!0){t&&(this.amount=""),this.alert=!1,this.voidRefundDialog=!1,this.voidRefundPartialAmountDialog=!1,this.loadingActions=!0;let e=new FormData;e.append("amount",this.amount),e.append("void_or_refund",this.voidOrRefund);try{let t=await r().post(""+(this.getInternalCoreClearController+"/void_return_for_portal/"+this.selectedTransactionId),e,{withCredentials:!0,crossDomain:!0});this.loadingActions=!1,!0===t.data.success?this.openAlert("success",t.data.message):this.openAlert("error",t.data.message)}catch(a){this.voidRefundDialog=!1,this.voidRefundPartialAmountDialog=!1,console.error(a),this.openAlert("error",a)}},async capturePreauth(){this.alert=!1,this.captureDialog=!1,this.loadingActions=!0;let t=new FormData;try{let e=await r().post(""+(this.getInternalCoreClearController+"/capture_preauth/"+this.selectedTransactionId),t,{withCredentials:!0,crossDomain:!0});if(this.loadingActions=!1,!0===e.data.success){let t="error",a="Unknown error";!0===e.data.approved&&(t="success",a="Successfully captured transaction "+this.selectedTransactionId),this.openAlert(t,a)}else this.openAlert("error",e.data.responseDescription)}catch(e){this.voidRefundDialog=!1,this.voidRefundPartialAmountDialog=!1,console.error(e),this.openAlert("error",e)}},async saveFilterPreferences(){let t=new FormData;t.append("transaction_filters",JSON.stringify(this.filterTypes));try{let e=await r().post(""+(this.getInternalEmployeePreferencesController+"/save_transaction_filters"),t,{withCredentials:!0,crossDomain:!0});200===e.status?console.log("Filter preferences updated"):console.log("Unable to save filter preferences")}catch(e){console.error(e)}},async getFilterPreferences(){try{let t=await r().get(""+(this.getInternalEmployeePreferencesController+"/get_transaction_filters"),{withCredentials:!0,crossDomain:!0,params:{}});t.data?this.filterTypes=t.data:(console.log("No filter preferences found"),this.filterTypes=["Charge","Refund","Capture"])}catch(t){console.error("Could not get filter preferences"),console.error(t)}},excelExport(){const t=this.filterTypes.map((t=>t.toLowerCase())),e=this.showDeclines?1:0;window.location.href=this.getInternalCoreClearController+"/excel_export_transactions_for_portal?start_date="+this.dateRange.startDate+"&end_date="+this.dateRange.endDate+"&search="+this.search+"&transaction_type="+encodeURIComponent(JSON.stringify(t))+"&show_declines="+e}},filters:{titleCase:t=>{if(!t)return"";t=t.toString().toLowerCase().split(" ");for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].slice(1);return t.join(" ")},currency:(t,e)=>{if(!t)return"0";let a=c().formatMoney(t);return"void"===e||"refund"===e||"reverse"===e?"-"+a:a}}},v=p;var g=a(1001),f=a(3453),m=a.n(f),y=a(1234),C=a(3150),D=a(2371),k=a(7118),_=a(2102),x=a(6957),b=a(4484),w=a(4497),T=a(1418),R=a(6428),A=a(1152),S=a(7003),V=a(2877),Z=a(3986),P=a(9762),I=a(6251),M=a(5978),z=a(6656),E=a(7921),O=(0,g.Z)(v,i,s,!1,null,null,null);const B=O.exports;m()(O,{VAlert:y.Z,VBtn:C.Z,VCard:D.Z,VCardActions:k.h7,VCardText:k.ZB,VCardTitle:k.EB,VCol:_.Z,VDataTable:x.Z,VDatePicker:b.Z,VDialog:w.Z,VDivider:T.Z,VIcon:R.Z,VMenu:A.Z,VProgressLinear:S.Z,VRow:V.Z,VSelect:Z.Z,VSpacer:P.Z,VSwitch:I.Z,VTextField:M.Z,VToolbar:z.Z,VToolbarTitle:E.qW})},3014:(t,e,a)=>{a.r(e),a.d(e,{default:()=>h});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"py-10",attrs:{fluid:""}},[a("router-view")],1)},s=[];const n={name:"TransactionScreen"},o=n;var r=a(1001),l=a(3453),c=a.n(l),u=a(9846),d=(0,r.Z)(o,i,s,!1,null,null,null);const h=d.exports;c()(d,{VContainer:u.Z})}}]);
//# sourceMappingURL=transaction.720f7766.js.map