"use strict";(globalThis["webpackChunkcoreclear_portal"]=globalThis["webpackChunkcoreclear_portal"]||[]).push([[58],{6232:(s,t,e)=>{e.d(t,{Z:()=>i});var r=e(3325),a=e(6210),o=e(6257);const i=(0,r.Z)(a.Z,(0,o.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(s){const t=Object.values(s).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(s){const t=s=>s.$watch("hasError",(t=>{this.$set(this.errorBag,s._uid,t)}),{immediate:!0}),e={_uid:s._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?e.shouldValidate=s.$watch("shouldValidate",(r=>{r&&(this.errorBag.hasOwnProperty(s._uid)||(e.valid=t(s)))})):e.valid=t(s),e},validate(){return 0===this.inputs.filter((s=>!s.validate(!0))).length},reset(){this.inputs.forEach((s=>s.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((s=>s.resetValidation())),this.resetErrorBag()},register(s){this.inputs.push(s),this.watchers.push(this.watchInput(s))},unregister(s){const t=this.inputs.find((t=>t._uid===s._uid));if(!t)return;const e=this.watchers.find((s=>s._uid===t._uid));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((s=>s._uid!==t._uid)),this.inputs=this.inputs.filter((s=>s._uid!==t._uid)),this.$delete(this.errorBag,t._uid)}},render(s){return s("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:s=>this.$emit("submit",s)}},this.$slots.default)}})},3968:(s,t,e)=>{e.r(t),e.d(t,{default:()=>T});var r=function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{staticClass:"align-center justify-center"},[r("v-col",{attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[r("v-alert",{attrs:{border:"left","close-text":"Close Alert",type:s.alertType,transition:"scale-transition",prominent:""},model:{value:s.alert,callback:function(t){s.alert=t},expression:"alert"}},[s._v(" "+s._s(s.alertMessage)+" ")]),r("div",{staticClass:"text-center"},[s.passwordResetSuccess?r("v-btn",{staticClass:"white--text mx-auto mt-3",attrs:{color:s.getAppColors.primary,rounded:"",large:"",to:"/"}},[s._v(" Go to Login ")]):s._e()],1),s.passwordResetSuccess?s._e():r("v-fade-transition",[r("v-card",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],staticClass:"elevation-12 rounded-lg"},[r("v-toolbar",{attrs:{color:s.getAppColors.primary,dark:""}},[r("v-avatar",{attrs:{size:"50px"}},[r("v-img",{attrs:{alt:"Logo",src:e(9344),contain:""}})],1),r("v-toolbar-title",{attrs:{dark:""}},[s._v(" core"),r("strong",[s._v("CLEAR")]),s._v(" Portal ")])],1),r("v-card-title",[s._v("Reset Password")]),r("v-card-text",[r("v-form",{ref:"form",model:{value:s.valid,callback:function(t){s.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{"prepend-icon":"lock",color:s.getAppColors.primary,"append-icon":s.showPassword?"mdi-eye":"mdi-eye-off",label:"Password",name:"password",type:s.showPassword?"text":"password",autocomplete:"current-password",rules:s.passwordRules,required:""},on:{"click:append":function(t){s.showPassword=!s.showPassword}},model:{value:s.password,callback:function(t){s.password=t},expression:"password"}}),r("v-text-field",{attrs:{"prepend-icon":"lock",color:s.getAppColors.primary,"append-icon":s.showConfirmPassword?"mdi-eye":"mdi-eye-off",label:"Confirm Password",name:"confirmPassword",type:s.showConfirmPassword?"text":"password",autocomplete:"current-password",rules:s.confirmPasswordRules,required:""},on:{keyup:function(t){return!t.type.indexOf("key")&&s._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.submit.apply(null,arguments)},"click:append":function(t){s.showConfirmPassword=!s.showConfirmPassword}},model:{value:s.confirmPassword,callback:function(t){s.confirmPassword=t},expression:"confirmPassword"}})],1)],1),r("v-card-actions",[r("v-btn",{attrs:{text:"",rounded:"",large:"",to:"/"}},[s._v("Cancel")]),r("v-spacer"),r("v-btn",{staticClass:"white--text",attrs:{color:s.getAppColors.primary,disabled:!s.valid,loading:s.loading,rounded:"",large:""},on:{click:s.submit}},[s._v(" Reset password ")])],1)],1)],1),r("v-dialog",{attrs:{"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"300"},model:{value:s.loading,callback:function(t){s.loading=t},expression:"loading"}},[r("v-card",{attrs:{color:s.getAppColors.primary,dark:""}},[r("v-card-text",[s._v(" Please wait... "),r("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)],1)],1)},a=[],o=e(629),i=e(9669),l=e.n(i);const n={name:"ResetPassword",data(){return{loading:!1,valid:!1,showPassword:!1,showConfirmPassword:!1,alert:!1,alertMessage:"",alertType:"success",password:"",confirmPassword:"",passwordRules:[s=>!!s||"Password is required",s=>s.length>=8||"Password must be at least 8 characters"],confirmPasswordRules:[s=>!!s||"Password is required",s=>s.length>=8||"Password must be at least 8 characters",s=>this.password===s||"Password must match"],passwordResetSuccess:!1}},computed:{...(0,o.Se)(["getAppColors","getInternalLoginController"])},methods:{openAlert(s,t){this.alertType=s,this.alertMessage=t,this.alert=!0},submit(){this.$refs.form.validate()&&(this.loading=!0,this.alert=!1,this.doResetPassword())},async doResetPassword(){let s=new FormData;s.append("password",this.password),s.append("confirm_password",this.confirmPassword);try{let t=await l().post(""+(this.getInternalLoginController+"/do_reset_password/"+this.$route.params.reset_key+"/1"),s,{withCredentials:!0,crossDomain:!0});this.loading=!1,!0===t.data.success?(this.passwordResetSuccess=!0,this.openAlert("success",t.data.message)):this.openAlert("error",t.data.message)}catch(t){this.openAlert(t.message),console.error(t)}}}},d=n;var c=e(1001),p=e(3453),u=e.n(p),h=e(1234),w=e(6370),m=e(3150),v=e(2371),g=e(7118),f=e(2102),C=e(9846),_=e(4497),b=e(3493),y=e(6232),P=e(7047),V=e(7003),x=e(2877),k=e(9762),Z=e(5978),A=e(6656),B=e(7921),R=(0,c.Z)(d,r,a,!1,null,null,null);const T=R.exports;u()(R,{VAlert:h.Z,VAvatar:w.Z,VBtn:m.Z,VCard:v.Z,VCardActions:g.h7,VCardText:g.ZB,VCardTitle:g.EB,VCol:f.Z,VContainer:C.Z,VDialog:_.Z,VFadeTransition:b.Z5,VForm:y.Z,VImg:P.Z,VProgressLinear:V.Z,VRow:x.Z,VSpacer:k.Z,VTextField:Z.Z,VToolbar:A.Z,VToolbarTitle:B.qW})},9344:(s,t,e)=>{s.exports=e.p+"img/logo-only.62b21ebf.png"}}]);
//# sourceMappingURL=resetPassword.b7a75b38.js.map