"use strict";(globalThis["webpackChunkcoreclear_portal"]=globalThis["webpackChunkcoreclear_portal"]||[]).push([[498],{6251:(e,t,i)=>{i.d(t,{Z:()=>f});var a=i(8230),s=i(6286),r=i(144);const n=r.Z.extend({name:"rippleable",directives:{ripple:s.Z},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(e={}){return this.ripple?(e.staticClass="v-input--selection-controls__ripple",e.directives=e.directives||[],e.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",e)):null}}});var o=i(4419),l=i(3325);function c(e){e.preventDefault()}const u=(0,l.Z)(a.Z,n,o.Z).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const e=this.value,t=this.internalValue;return this.isMultiple?!!Array.isArray(t)&&t.some((t=>this.valueComparator(t,e))):void 0===this.trueValue||void 0===this.falseValue?e?this.valueComparator(e,t):Boolean(t):this.valueComparator(t,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(e){this.lazyValue=e,this.hasColor=e}},methods:{genLabel(){const e=a.Z.options.methods.genLabel.call(this);return e?(e.data.on={click:c},e):e},genInput(e,t){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:e,type:e},t),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onBlur(){this.isFocused=!1},onClick(e){this.onChange(),this.$emit("click",e)},onChange(){if(!this.isInteractive)return;const e=this.value;let t=this.internalValue;if(this.isMultiple){Array.isArray(t)||(t=[]);const i=t.length;t=t.filter((t=>!this.valueComparator(t,e))),t.length===i&&t.push(e)}else t=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(t,this.trueValue)?this.falseValue:this.trueValue:e?this.valueComparator(t,e)?null:e:!t;this.validate(!0,t),this.internalValue=t,this.hasColor=t},onFocus(){this.isFocused=!0},onKeydown(e){}}});var d=i(5500),h=i(3493),p=i(624),g=i(4589);const f=u.extend({name:"v-switch",directives:{Touch:d.Z},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...a.Z.options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...t}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(h.b0,{},[!1===this.loading?null:this.$slots.progress||this.$createElement(p.Z,{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(e){(e.keyCode===g.Do.left&&this.isActive||e.keyCode===g.Do.right&&!this.isActive)&&this.onChange()}}})},4667:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-row",{staticClass:"justify-center"},[i("v-col",{attrs:{cols:"12",md:"10"}},[i("v-alert",{attrs:{type:e.alertType,border:"left","close-text":"Close Alert",dismissible:"",transition:"scale-transition"},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v(" "+e._s(e.alertMessage)+" ")]),i("v-dialog",{attrs:{"hide-overlay":"",persistent:"",transition:"dialog-bottom-transition",width:"300"},model:{value:e.loadingActions,callback:function(t){e.loadingActions=t},expression:"loadingActions"}},[i("v-card",{attrs:{color:e.getAppColors.primary,dark:""}},[i("v-card-text",[e._v(" Processing... "),i("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),i("v-data-table",{directives:[{name:"show",rawName:"v-show",value:!e.loadingActions,expression:"!loadingActions"}],staticClass:"elevation-4 rounded-lg mt-2",attrs:{headers:e.headers,items:e.records,loading:e.loading,options:e.options,"server-items-length":e.totalRecords,"loading-text":"Loading... Please wait","footer-props":e.tableFooterProps,"sort-by":"depositDate","sort-desc":"","must-sort":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.depositDate",fn:function(t){var i=t.item;return[e._v(" "+e._s(e.formatDateTime(i.depositDate))+" ")]}},{key:"item.amount",fn:function(t){var i=t.item;return[e._v(" "+e._s(e._f("currency")(i.amount,i.offsetDescription))+" ")]}},{key:"item.offsetDescription",fn:function(t){var i=t.item;return[e._v(" "+e._s(e._f("titleCase")(i.offsetDescription))+" ")]}},{key:"top",fn:function(){return[i("v-toolbar",{staticClass:"rounded-t-lg",attrs:{color:"green darken-2",dark:"",flat:""}},[i("v-toolbar-title",[e._v("ACH Funding")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-text-field",{attrs:{label:"Search","append-icon":"search","single-line":"","hide-details":"",clearable:"",dark:""},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.datepickerDateRange=[],e.initialize()},"click:append":function(t){e.datepickerDateRange=[],e.initialize()},"click:clear":function(t){return e.initialize()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),i("v-spacer"),i("v-toolbar-title",[e._v(" Transactions for "+e._s(e.dateRangeDisplay)+" ")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-menu",{attrs:{"close-on-content-click":!1,"offset-x":"",left:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[i("v-btn",e._g(e._b({attrs:{color:"primary",rounded:"",dark:""}},"v-btn",s,!1),a),[i("v-icon",[e._v("mdi-filter")])],1)]}}]),model:{value:e.filterMenu,callback:function(t){e.filterMenu=t},expression:"filterMenu"}},[i("v-card",[i("v-card-title",[e._v(" Filters")]),i("v-card-text",[i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-select",{attrs:{label:"Transaction Types",color:e.getAppColors.primary,"item-color":"green","append-icon":"mdi-filter",items:e.transactionTypes,multiple:"",chips:"","deletable-chips":""},on:{change:e.saveFilterPreferences},model:{value:e.filterTypes,callback:function(t){e.filterTypes=t},expression:"filterTypes"}})],1),i("v-col",{attrs:{cols:"12"}},[e.useCustomDateRange?i("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[i("v-text-field",e._g(e._b({attrs:{label:"Choose Date Range",color:e.getAppColors.primary,"append-icon":"mdi-calendar",readonly:""},model:{value:e.dateRangeText,callback:function(t){e.dateRangeText=t},expression:"dateRangeText"}},"v-text-field",s,!1),a))]}}],null,!1,2310006902),model:{value:e.datePickerMenu,callback:function(t){e.datePickerMenu=t},expression:"datePickerMenu"}},[i("v-date-picker",{attrs:{color:e.getAppColors.primary,range:""},on:{change:function(t){e.search="",e.initialize()}},model:{value:e.datepickerDateRange,callback:function(t){e.datepickerDateRange=t},expression:"\n                                                    datepickerDateRange\n                                                "}})],1):i("v-select",{attrs:{color:e.getAppColors.primary,items:e.getBlockchypDateRangeChoices,"item-color":"green","single-line":"","hide-details":"","return-object":""},on:{change:e.initialize},model:{value:e.quickDateRange,callback:function(t){e.quickDateRange=t},expression:"quickDateRange"}})],1),i("v-col",{attrs:{cols:"6"}},[i("v-switch",{attrs:{color:"green",label:"Custom Date Range"},model:{value:e.useCustomDateRange,callback:function(t){e.useCustomDateRange=t},expression:"useCustomDateRange"}})],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[i("v-alert",{staticClass:"ma-2",attrs:{prominent:"",text:"",type:"info"}},[i("v-row",{attrs:{align:"center"}},[i("v-col",{staticClass:"grow"},[e._v(" No records found")]),i("v-col",{staticClass:"shrink"},[i("v-btn",{staticClass:"my-2 white--text",attrs:{color:"green"},on:{click:e.initialize}},[e._v(" Retry ")])],1)],1)],1)]},proxy:!0}],null,!0)})],1)],1)},s=[],r=i(629),n=i(9669),o=i.n(n),l=i(743),c=i.n(l),u=i(381),d=i.n(u);const h={name:"AchFundingList",data(){return{datePickerMenu:!1,loading:!1,alert:!1,alertMessage:"",alertType:"success",search:"",filterMenu:!1,filterTypes:["Deposits","Discount"],transactionTypes:["Deposits","Discount"],tableFooterProps:{showFirstLastPage:!0},headers:[{text:"Deposit Date",align:"left",value:"depositDate"},{text:"Amount",align:"right",value:"amount"},{text:"Location",align:"right",value:"locationName"},{text:"Type",align:"center",value:"offsetDescription",filter:(e,t,i)=>{if(!this.filterTypes.length)return!0;if(!i.offsetDescription)return!1;const a=this.filterTypes.map((e=>e.toUpperCase()));return a.includes(i.offsetDescription.toUpperCase())}},{text:"Bank",align:"left",value:"bankName"},{text:"Routing",align:"left",value:"bankRouting"},{text:"Bank Account",align:"left",value:"bankAccountNumber.mask"},{text:"Reference",align:"left",value:"referenceNumber"}],options:{},records:[],totalRecords:0,useCustomDateRange:!1,datepickerDateRange:[],quickDateRange:{text:"Yesterday",value:"yesterday",useForBlockchyp:!0,days:null},loadingActions:!1,axiosSource:null}},watch:{useCustomDateRange:function(e){e||(this.datepickerDateRange=[],this.initialize())},options:{handler(){this.initialize()},deep:!0}},computed:{...(0,r.Se)(["getAppColors","getInternalMxController","getInternalEmployeePreferencesController","getBlockchypDateRangeChoices"]),dateRangeText(){return this.datepickerDateRange.map((e=>d()(e).format("MM/DD/YYYY"))).join(" through ")},getTotal(){const e=this.filterTypes.map((e=>e.toUpperCase()));let t=0;return this.records.forEach((i=>{this.filterTypes.length&&!e.includes(i.offsetDescription.toUpperCase())||(t+=i.amount)})),c().formatMoney(t)},dateRange(){let e=null,t=null,i=null,a=null;if(this.quickDateRange!=={}){switch(this.quickDateRange.value){case"today":e=0,t=0;break;case"yesterday":e=1,t=1;break;default:e=this.quickDateRange.days,t=0}i=d()().subtract(e,"days"),a=d()().subtract(t,"days")}let s=void 0!==this.datepickerDateRange[0]?this.datepickerDateRange[0]:null!==i?i:"",r=void 0!==this.datepickerDateRange[1]?this.datepickerDateRange[1]:null!==a?a:"";return""!==s&&(s=d()(s).set({hour:0,minute:0,second:0,millisecond:0}).toISOString()),""!==r&&(r=d()(r).set({hour:23,minute:59,second:59,millisecond:999}).toISOString()),{startDate:s,endDate:r}},dateRangeDisplay(){return this.dateRangeText?this.dateRangeText:this.quickDateRange.text}},mounted(){this.getFilterPreferences()},methods:{openAlert(e,t){this.alertType=e,this.alertMessage=t,this.alert=!0},async initialize(){this.loading=!0,this.alert=!1;const{sortBy:e,sortDesc:t,page:i,itemsPerPage:a}=this.options,s=(i-1)*a;let r=!1;const n=1===e.length?e[0]:null,l=1===t.length?t[0]:null;n&&(r=n,l&&(r+=":desc")),console.log(r);try{this.axiosSource&&this.axiosSource.cancel(),this.axiosSource=o().CancelToken.source();let e=await o().get(""+(this.getInternalMxController+"/get_ach_funding"),{withCredentials:!0,crossDomain:!0,params:{start_date:this.dateRange.startDate,end_date:this.dateRange.endDate,sort:r,limit:a,offset:s},cancelToken:this.axiosSource.token});this.loading=!1,this.axiosSource=null,e.data.warning?this.openAlert("info",e.data.message):e.data.data.totalRecords>0?(this.records=e.data.data.records,this.totalRecords=e.data.data.totalRecords):(console.log("No ach fundings found"),this.records=[],this.totalRecords=0)}catch(c){console.error("Could not get list of ach fundings"),console.error(c),"Cancel"==!c.toString()&&this.openAlert("error",c.toString()),this.loading=!1,this.axiosSource=null,this.records=[]}},formatDateTime(e){return e?d()(e).format("MM/DD/YYYY LT"):""},formatDate(e){return e?d()(e).format("MM/DD/YYYY"):""},async saveFilterPreferences(){let e=new FormData;e.append("ach_funding_filters",JSON.stringify(this.filterTypes));try{let t=await o().post(""+(this.getInternalEmployeePreferencesController+"/save_ach_funding_filters"),e,{withCredentials:!0,crossDomain:!0});200===t.status?console.log("Filter preferences updated"):console.log("Unable to save filter preferences")}catch(t){console.error(t)}},async getFilterPreferences(){try{let e=await o().get(""+(this.getInternalEmployeePreferencesController+"/get_ach_funding_filters"),{withCredentials:!0,crossDomain:!0,params:{}});e.data?this.filterTypes=e.data:(console.log("No filter preferences found"),this.filterTypes=["Deposits","Discount"])}catch(e){console.error("Could not get filter preferences"),console.error(e)}}},filters:{titleCase:e=>{if(!e)return"";e=e.toString().toLowerCase().split(" ");for(let t=0;t<e.length;t++)e[t]=e[t][0].toUpperCase()+e[t].slice(1);return e.join(" ")},currency:(e,t)=>{if(!e)return"0";let i=c().formatMoney(e);return"void"===t||"refund"===t||"reverse"===t?"-"+i:i}}},p=h;var g=i(1001),f=i(3453),v=i.n(f),m=i(1234),y=i(3150),k=i(2371),D=i(7118),C=i(2102),b=i(6957),x=i(4484),R=i(4497),w=i(1418),_=i(6428),S=i(1152),T=i(7003),V=i(2877),A=i(3986),Z=i(9762),M=i(6251),P=i(5978),F=i(6656),B=i(7921),E=(0,g.Z)(p,a,s,!1,null,null,null);const I=E.exports;v()(E,{VAlert:m.Z,VBtn:y.Z,VCard:k.Z,VCardText:D.ZB,VCardTitle:D.EB,VCol:C.Z,VDataTable:b.Z,VDatePicker:x.Z,VDialog:R.Z,VDivider:w.Z,VIcon:_.Z,VMenu:S.Z,VProgressLinear:T.Z,VRow:V.Z,VSelect:A.Z,VSpacer:Z.Z,VSwitch:M.Z,VTextField:P.Z,VToolbar:F.Z,VToolbarTitle:B.qW})},2504:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{staticClass:"py-10",attrs:{fluid:""}},[i("router-view")],1)},s=[];const r={name:"AchFundingScreen"},n=r;var o=i(1001),l=i(3453),c=i.n(l),u=i(9846),d=(0,o.Z)(n,a,s,!1,null,null,null);const h=d.exports;c()(d,{VContainer:u.Z})}}]);
//# sourceMappingURL=ach-funding.76e5a4b3.js.map